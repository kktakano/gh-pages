# SQL

## SQLとは  
  SQLとはStructured Query Language(構造化問い合わせ言語)のことで、  
  データベースの定義や操作などを実現するためのデータベース言語の一つ。
  リレーショナル型データベースに対応したデータベース言語として位置付けられている。  

## SSQLの機能
  本来データベースを管理しているのはRDBMS(Relational DataBase Management System )。
  ユーザはデータベース言語(SQL)を使用して、RDBMSを制御する。

  |制御機能|詳細|
  |-------|---|
  |データベース定義|データを格納すべき表の定義|
  ||複数の表を関連づけるための規約や制約|
  ||データベースに必要な機密保護の宣言|
  |データベース操作|表に対するデータの登録・修正・削除|
  ||複数の表の結合、ビュー表の作成などの集合操作|
  ||表中のデータを検索|
  |トランザクション管理|回復や同時実行のための最小単位として保証される一連の処理の操作|

## SQLの利用方法
  SQLを用いてRDBMSを操作する方法はいくつか存在する。
  * モジュール呼び出し
    * C言語などの言語からSQL文によって作成されたモジュールを呼び出すことでデータベース操作を実現する。
      モジュール呼び出しは、通常CALL命令によって親言語から呼び出すことが可能であるため、それぞれのモジュールを独立した形で作成することが可能。
  * 静的SQL
    * 親言語側のソースプログラムに直接SQLを記述する方法で、埋め込みSQLの一種。親言語プログラム側のSQL構文を用いることで実現します。この方法は現在では多くのRDBMSで実現可能ですが、一度親バイナリへ埋め込んでしまえば、そのSQLには変化がないことから静的SQLと呼ばれています。
  * 動的SQL
    * 上の静的SQLに対して動的SQLは、親言語の実行時にSQLを生成する方法で、用途に応じたSQLをその都度生成できることから、静的SQLに比べると汎用性がある。
  * 直接呼び出し
    * 直接ユーザが命令として発行することでRDBMSの操作を行う方法。
      実際に直接SQLをRDBMSに発行するには、RDBMSに付属するコマンドラインツールなどのソフトを使用する。コマンドラインツールは、一般的にはテキストエディタに似たウィンドウが開き、このウィンドウ内にSQLを入力する。
      コマンドラインツールはこれを解析し、翻訳すると共に、この情報をRDBMSへと引き渡します。一方、RDBMS側では指示された命令に応じたデータベース操作を行い、その結果を通知します。コマンドラインツールでは、これらをどう画面上に表示することで対話的操作を実現している。

## 基本的なデータ型
  データ型は各製品に実装されるSQLによって若干の差はあるため注意が必要。公式には基本的なデータ型として次の7つが定義されている。
  * **CHARACTER STRING**
    * 使用される文字セットに関わりなく、テキストを表す全てのデータ型。固定長と可変長がある。  
      可変長の場合はCHARACTER VARYINGと定義される。引数として固定長の場合は、その文字数をとり、可変長の場合は文字数の最大値をとる。  
      CHARACTER => CHAR, CHARACTER VARYING => CHAR VARYING や VARCHAR　と省略することも可能。
  
  * **NATIONAL CHARACTER**
    * 文字セットが実装時に定義され、もっとも一般的に使用される言語に対応する事を除けば、実質的には、CHARACTER STRING型と同じ。  
      NATIONAL CHAR　または　NCHAR　と省略することが可能。

  * **BIT STRING**
    * BIT文字列はバイナリ数で、０と１のシーケンスで構成される。固定長と可変長があり、  
      可変長の場合はBIT VARYINGと定義される。引数として、固定長の場合はその文字列を、可変長の場合は文字数の最大値をとる。

  * **EXACT NUMERIC**
    精度とスケールを指定または暗示する。厳密な数を表す数字で次の4つがある。  
      **NUMERIC**
        指定された桁数と小数点位置をもつ数値を定義する。
      **DECIMAL**
        NUMERICと非常に似ているが、実装によっては定義されているものより大きな大きな精度が選択されるという、わずかな違いがある。  
        NUMERICが実際の精度を指定するのに対し、DECIMALは最小の精度を指定する。
      **INTEGER**
        小数点を持たない精度の整数値を定義。